<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安全資料</title>
    <link rel="stylesheet" href="./css/common/all.css">
    <link rel="stylesheet" href="./css/common/header.css">
    <link rel="stylesheet" href="./css/common/footer.css">
    <link rel="stylesheet" href="./css/common/banner1.css">
    <link rel="stylesheet" href="./css/safe.css">
    <link rel="stylesheet" href="./css/jquery-ui.theme.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <!-- 轉成pdf的套件，rasterizehtml函式庫，配合canvas  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rasterizehtml/1.3.0/rasterizeHTML.allinone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <!-- GOOGLE FONT -->
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital@1&family=Noto+Sans+HK:wght@900&family=Noto+Sans+TC:wght@300&display=swap"
        rel="stylesheet">

    </style>
</head>

<body>
    <div class="about-us"></div>
    <header class="header">
        <div class="header__block">
            <nav class="header__nav">
                <a href="./index.html" class="header__logo">
                    <img src="./images/logo/logo_green_small.png" class="header__logo-img">
                </a>
                <ul class="header__nav-list">
                    <li class="header__nav_li">
                        <a class="header__nav_li-link " href="./about_us.html">關於獨旅</a>
                    </li>
                    <li class="header__nav_li" id="block_first">
                        <a href="#" class="dropdown">
                            <span class="header__nav_li-link  -special_function">旅行視角</span>
                        </a>
                        <ul class="header__sub-ul a">
                            <li class="header__sub-li"><a class="header__sub-li-link" href="./plan.html">自助規劃</a></li>
                            <!-- <li class="header__sub-li"><a class="header__sub-li-link" href="./form.html">旅行投稿</a></li> -->
                        </ul>
                    </li>
                    <li class="header__nav_li ">
                        <a class="header__nav_li-link -hover_function -active" href="./safe.html">安全資料</a>
                    </li>
                    <li class="header__nav_li " id="block_second">
                        <a href="#" class="dropdown">
                            <span class="header__nav_li-link -special_function">推薦景點</span>
                        </a>
                        <ul class="header__sub-ul b">
                            <li class="header__sub-li"><a class="header__sub-li-link" href="./spot.html">心境選點</a></li>
                            <li class="header__sub-li"><a class="header__sub-li-link" href="./point.html">在地店家</a></li>
                        </ul>
                    </li>

                    <li class="header__nav_li -register_function"><a href="./register.html"
                            class="header__nav_li-link -register">註冊/登入</a></li>
                </ul>
                <button type="button" id="btn_hamburger"></button>
            </nav>
        </div>
    </header>

    <section class="banner_bg">
        <p>安全資料</p>
        <img src="./images/banner 1.png">
    </section>
    <!-- ===============================================麵包屑==================================================== -->
    <div class="breadcrumb_title">
        <ul class="breadcrumb_title_list">
            <li><a href="./index.html">首頁</a></li>
            <li class="hover_not">安全資料</li>
        </ul>
    </div>
    <!-- =======================================================================主題開始 ==================================================================================================-->
    <div class="safe_title">
        <h1>安全資料</h1>
    </div>
    <!-- ========================================================================tab結構============================================================================================= -->
    <div class="all_tabs_box">
        <div id="tabs">
            <ul class="tabs_set">
                <li><a href="#tab_japan" class="japan"><span>日本</span></a></li>
                <li> <a href="#tab_korea"><span>韓國</span></a></li>
                <li><a href="#tab_singapore"><span>新加坡</span></a></li>
            </ul>
            <div id="all">
                <div id="tab_japan">
                    <div class="safe_main_box">
                        <div class="inner_box">
                            <div class="image_outside">
                                <div class="image_box"> <img src="./images/safe/safe.png" alt="無法顯示"></div>
                            </div>
                            <h1>日本安全避難資訊</h1>
                            <div class="all_information">
                                <div class="hospitial_box">
                                    <h3>英語/大型醫院</h3>
                                    <ul>
                                        <li class="address_icon">
                                            <p>Red Cross Hospital2-34-10</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>TokyoTel: 03-3444-1181</p>
                                        </li>
                                        <li class="address_icon">
                                            <p>Red Cross Hospital2-34-10</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>TokyoTel: 03-3444-1181</p>
                                        </li>
                                    </ul>
                                </div>
                                <div class="departmant_box">
                                    <h3>機構聯絡</h3>
                                    <ul>
                                        <li class="address_icon">
                                            <p>東京都醫療機關介紹服務</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>03-5285-8181</p>
                                        </li>
                                        <li class="address_icon">
                                            <p>緊急翻譯聯絡服務</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>03-5285-8181</p>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="download_safe">
                                <button type="button" class="downloadBtn">下載資料</button>
                                <!-- <a id="download_btn" href="javascript:print_html();">下載</a> -->
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab_korea">
                    <div class="safe_main_box">
                        <div class="inner_box">
                            <div class="image_outside">
                                <div class="image_box"> <img src="./images/safe/korea.png" alt="無法顯示"></div>
                            </div>
                            <h1>韓國安全避難資訊</h1>
                            <div class="all_information">
                                <div class="hospitial_box">
                                    <h3>英語/大型醫院</h3>
                                    <ul>
                                        <li class="address_icon">
                                            <p>Red Cross Hospital2-34-10</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>TokyoTel: 03-3444-1181</p>
                                        </li>
                                        <li class="address_icon">
                                            <p>Red Cross Hospital2-34-10</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>TokyoTel: 03-3444-1181</p>
                                        </li>
                                    </ul>
                                </div>
                                <div class="departmant_box">
                                    <h3>機構聯絡</h3>
                                    <ul>
                                        <li class="address_icon">
                                            <p>東京都醫療機關介紹服務</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>03-5285-8181</p>
                                        </li>
                                        <li class="address_icon">
                                            <p>緊急翻譯聯絡服務</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>03-5285-8181</p>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="download_safe">
                                <!-- <a id="download_btn" href="javascript:print_html();">下載</a> -->
                                <button type="button" class="downloadBtn">下載資料</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab_singapore">
                    <div class="safe_main_box">
                        <div class="inner_box">
                            <div class="image_outside">
                                <div class="image_box"> <img src="./images/safe/sin.png" alt="無法顯示"></div>
                            </div>
                            <h1>新加坡安全避難資訊</h1>
                            <div class="all_information">
                                <div class="hospitial_box">
                                    <h3>英語/大型醫院</h3>
                                    <ul>
                                        <li class="address_icon">
                                            <p>Red Cross Hospital2-34-10</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>TokyoTel: 03-3444-1181</p>
                                        </li>
                                        <li class="address_icon">
                                            <p>Red Cross Hospital2-34-10</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>TokyoTel: 03-3444-1181</p>
                                        </li>
                                    </ul>
                                </div>
                                <div class="departmant_box">
                                    <h3>機構聯絡</h3>
                                    <ul>
                                        <li class="address_icon">
                                            <p>東京都醫療機關介紹服務</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>03-5285-8181</p>
                                        </li>
                                        <li class="address_icon">
                                            <p>緊急翻譯聯絡服務</p>
                                        </li>
                                        <li class="phone_icon">
                                            <p>03-5285-8181</p>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="download_safe">
                                <!-- <a id="download_btn" href="javascript:print_html();">下載</a> -->
                                <button type="button" class="downloadBtn">下載資料</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="loading"><img src="./images/logo/logo_green_small.png" alt=""></div>
    <div id="mask"></div>
    <canvas id="canvas" width="595" height="842" style="border: 1px solid black; display:none;"></canvas>
    <!-- ------------------------------------------------footer---------------------------------------------------- -->
    <footer class="box_footer_main">
        <ul class="main_list">
            <li>
                <div class="box_footer_list">
                    <img src="./images/logo/logo_white_150.png" class="logo_img">
                    <p>想要最新消息?</p>
                    <p>想要加入我們?</p>
                    <p>想要了解更多?</p>
                    <div class=" list_media">
                        <img src="./images/footer/youtube.svg" alt="">
                        <img src="./images/footer/IG.svg" alt="">
                        <img src="./images/footer/fb.svg" alt="">
                    </div>
                </div>
            </li>
            <li>
                <div class="box_footer_contact">
                    <h3>Contact us</h3>
                    <p>email:yrjfkflfd@gmail.com</p>
                    <p>新竹縣新豐鄉山崎村</p>
                </div>
            </li>
            <li>
                <div class="box_footer_content">
                    <ul class="=content_link">
                        <li><a href="./about_us.html">
                                <p>關於獨旅</p>
                            </a></li>
                        <li><a href="./plan.html">
                                <p>旅行視角</p>
                            </a></li>
                        <li><a href="./spot.html">
                                <p>推薦景點</p>
                            </a></li>
                        <li><a href="./safe.html">
                                <p>安全資料</p>
                            </a></li>
                    </ul>
                </div>
            </li>
        </ul>

        <div class="class_for">
            <p>本網站為緯育TibaMe前端工程師班第80期學員專題作品，本平台僅供學習、展示之用。參考資源:KKDAY</p>
        </div>

    </footer>
    <script>
        // 漢堡功能
        let btnHamburger = document.getElementById("btn_hamburger");
        let navList = document.querySelector('.header__nav-list');

        btnHamburger.addEventListener("click", function () {
            this.classList.toggle("-on");
            navList.classList.toggle("-open");
        });
        //子選單的功能
        $(document).ready(function () {
            // 收合選單
            $('.dropdown').click(function (e) {
                e.preventDefault();
                // e.preventDefault();/阻止事件的預設行為，這裡防止點擊連結時跳轉到其他頁面。因為它是用a標籤做的，照理說要有頁面跳轉功能/
                $(this).parent().find('.header__sub-ul').slideToggle();
                // 找到被點擊元素（.dropdown）的父層，然後在父層內找到類別為 dropdown-open 的子元素，並使用 slideToggle 效果來切換它的顯示/隱藏狀態。
                $(this).parent().siblings().find('.header__sub-ul').slideUp();
                // 將其他打開的選單收起來
            })

            // tab切換
            $(function () {
                $("#tabs").tabs({
                    // 透過activate事件在切換頁籤時清空原本的內容
                    activate: function (event, ui) {
                        // 获取 canvas 元素
                        let canvas = document.getElementById("canvas");
                        // 獲取上下文
                        let context = canvas.getContext("2d");
                        // 清空画布
                        context.clearRect(0, 0, canvas.width, canvas.height);
                    }
                });
            });

            // 檔案下載
            // 先處理html，然後透過jsPDF輸出成canvas，再轉成PDF
            // 宣告成全域變數
            window.jsPDF = window.jspdf.jsPDF; //2.X版
            // 生成PDF的函式
            function generatePdf() {
                //測試讓Canvas成像在下方，已隱藏
                // 開始成像先取得畫布
                let content = canvas.getContext('2d');
                //HTML要被轉換成PDF的內容
                let fileContent = document.getElementById('all').outerHTML;
                let options = {
                    // width: 595,
                    // height: 842
                };
                //異步因為需要請求網路及圖像加載，使用then在異步完成執行
                rasterizeHTML.drawHTML(fileContent, canvas, options).then(function (renderResult) {
                    // 渲染結果放到畫布上
                    content.drawImage(renderResult.image, 0, 0);
                    // console.log(canvas.toDataURL("image/png"));
                    //將畫布內容轉成PNG格式的數據URL，URL可以不用再對服務器額外請求，導出方便
                    let imgData = canvas.toDataURL("image/png");
                    let pdf = new jsPDF()
                    //2.X版的寫法 var pdf = new jspdf.jsPDF()
                    pdf.addImage(imgData, 'JPEG', 0, 0);
                    //console.log(pdf);	
                    // 儲存
                    pdf.save("download.pdf");
                });
            }
            // 觸發的方式
            $('.downloadBtn').on("click", (event) => {
                generatePdf();
            });

        })

    </script>
</body>

</html>